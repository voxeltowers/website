(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[17],{6794:function(e,n,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/faucet",function(){return t(9098)}])},8292:function(e,n,t){"use strict";var r=t(5893),i=t(8527);n.Z=function(e){return(0,r.jsx)(i.kC,{flexDirection:"column",minHeight:"100vh",overflow:"hidden",children:e.children})}},9370:function(e,n,t){"use strict";var r=t(5893),i=t(9008);n.Z=function(e){return(0,r.jsxs)("div",{children:[(0,r.jsxs)(i.default,{children:[(0,r.jsx)("title",{children:e.title||"VoxelTowers"}),(0,r.jsx)("meta",{name:"viewport",content:"initial-scale=1.0, width=device-width"}),(0,r.jsx)("meta",{charSet:"utf-8"}),(0,r.jsx)("link",{rel:"shortcut icon",type:"image/svg",href:"".concat("","/assets/voxel-towers-logo.svg")})]}),e.children]})}},9098:function(e,n,t){"use strict";t.r(n),t.d(n,{default:function(){return k}});var r=t(5893),i=t(9795),o=t(7294),a=t(3238),c=(t(8527),t(9762),t(4612),t(6723),t(8292),t(9370),t(7786),t(8152),t(4651),t(2660)),u=t(4051),s=t.n(u),f=t(1438),l=t(8928),d=t(5553);function v(e,n,t,r,i,o,a){try{var c=e[o](a),u=c.value}catch(s){return void t(s)}c.done?n(u):Promise.resolve(u).then(r,i)}function h(e){return function(){var n=this,t=arguments;return new Promise((function(r,i){var o=e.apply(n,t);function a(e){v(o,r,i,a,c,"next",e)}function c(e){v(o,r,i,a,c,"throw",e)}a(void 0)}))}}function p(e,n){for(var t=0;t<n.length;t++){var r=n[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var m,w=function(){function e(n){!function(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}(this,e),this.provider=new f.cK(n.rpcUrl),this.confirmationsThreshold=n.confirmationsThreshold||2,this.confirmationWaitingTimeoutSec=n.confirmationWaitingTimeoutSec||120,this.confirmationPollIntervalSec=n.confirmationPollIntervalSec||5}var n,t,r;return n=e,t=[{key:"sendEth",value:function(n){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],r=this;return h(s().mark((function i(){var o,a;return s().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return o=new l.w5(n.senderPrivKey,r.provider),i.next=3,o.sendTransaction({to:n.receiverAddress,value:e.ethToWei(n.amountInEth)});case 3:if(a=i.sent,!t){i.next=7;break}return i.next=7,r.waitForConfirmation(a.hash);case 7:return i.abrupt("return",a);case 8:case"end":return i.stop()}}),i)})))()}},{key:"getBalance",value:function(n){var t=this;return h(s().mark((function r(){var i,o;return s().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,t.provider.getBalance(n);case 2:return i=r.sent,o=e.weiToEth(i),r.abrupt("return",o);case 5:case"end":return r.stop()}}),r)})))()}},{key:"waitForConfirmation",value:function(e){var n=this;return h(s().mark((function t(){var r,i,o,a,c;return s().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:r=!1,o=Math.round(n.confirmationWaitingTimeoutSec/n.confirmationPollIntervalSec),a=0;case 4:if(!(a<=o)){t.next=23;break}return t.next=8,null===(c=n.provider)||void 0===c?void 0:c.getTransaction(e);case 8:if(!((i=t.sent)&&i.confirmations>=n.confirmationsThreshold)){t.next=14;break}return r=!0,t.abrupt("break",23);case 14:if(a!==o){t.next=18;break}return t.abrupt("break",23);case 18:return t.next=20,n.sleep(n.confirmationPollIntervalSec);case 20:a++,t.next=4;break;case 23:if(r){t.next=25;break}throw new Error("confirmation waiting timeout");case 25:case"end":return t.stop()}}),t)})))()}},{key:"sleep",value:function(e){return new Promise((function(n){return setTimeout(n,1e3*e)}))}},{key:"fundAddressUpTo",value:function(e){var n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],t=this;return h(s().mark((function r(){var i,o,a;return s().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,t.getBalance(e.receiverAddress);case 2:if(i=r.sent,!((o=e.amountInEth-i)>0)){r.next=9;break}return r.next=8,t.sendEth({senderPrivKey:e.senderPrivKey,amountInEth:o,receiverAddress:e.receiverAddress},n);case 8:a=r.sent;case 9:return r.abrupt("return",a);case 10:case"end":return r.stop()}}),r)})))()}}],r=[{key:"weiToEth",value:function(e){return parseFloat(d.dF(e))}},{key:"ethToWei",value:function(e){return d.fi(e.toString())}}],t&&p(n.prototype,t),r&&p(n,r),e}(),E="0x8fA98E72788A9200B41113728F8aDEd1597a99FE",x=new w({rpcUrl:c.$G,confirmationsThreshold:1});!function(e){e[e.HIDE=0]="HIDE",e[e.SUCCESS=1]="SUCCESS",e[e.ERROR=2]="ERROR",e[e.ENOUGH_FUNDS=3]="ENOUGH_FUNDS"}(m||(m={}));var k=function(){var e=(0,i.Ge)().account,n=(0,o.useState)(""),t=(n[0],n[1]),c=(0,o.useState)(!1),u=(c[0],c[1]),s=(0,o.useState)(0),f=(s[0],s[1]),l=(0,o.useState)(m.HIDE),d=l[0],v=(l[1],(0,a.pm)());(0,o.useEffect)((function(){d===m.SUCCESS&&v({title:"Success",description:"Account successfully funded!",status:"success",duration:5e3,isClosable:!0}),d===m.ENOUGH_FUNDS&&v({title:"Warning",description:"Account not funded because balance is greater than ".concat(1,"\n            ."),status:"warning",duration:5e3,isClosable:!0}),d===m.ERROR&&v({title:"Error",description:"Ooops. An Error occurred :(. Check console for more details.",status:"error",duration:5e3,isClosable:!0})}),[d]);return(0,o.useEffect)((function(){return e=E,n=f,u(!0),void x.getBalance(e).then((function(e){return n(e)})).catch((function(e){return console.log(e)})).finally((function(){return u(!1)}));var e,n}),[]),(0,o.useEffect)((function(){return t(e)}),[e]),(0,r.jsx)("p",{children:"Only for development"})}}},function(e){e.O(0,[199,572,774,888,179],(function(){return n=6794,e(e.s=n);var n}));var n=e.O();_N_E=n}]);